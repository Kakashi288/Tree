<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Tree Visualization</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
</head>
<body>
    <div class="family-equation">â„± = âˆ‘<sub>i=1</sub><sup>âˆ</sup> G<sub>i</sub>(L,M,T)</div>

    <!-- Mataji Image -->
    <img src="Images/Mataji.jpg" alt="Mataji" class="mataji-image" id="matajiImage">

    <!-- Ganesh Image -->
    <img src="Images/Ganesh.jpg" alt="Ganesh" class="ganesh-image" id="ganeshImage">

    <!-- Navigation Menu Toggle -->
    <button class="nav-menu-toggle" id="navMenuToggle" aria-label="" title="">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <!-- Navigation Menu Overlay -->
    <div class="nav-menu-overlay" id="navMenuOverlay"></div>

    <!-- Navigation Menu -->
    <nav class="nav-menu" id="navMenu">
        <h2>Navigation</h2>
        <a href="landing.html" class="nav-menu-item">ğŸ  Home</a>
        <a href="tree.html" class="nav-menu-item active-page">ğŸŒ³ Family Tree</a>
        <a href="family-data.html" class="nav-menu-item">ğŸ“Š Family Data</a>
        <a href="family-history.html" class="nav-menu-item">ğŸ›ï¸ Family History</a>
        <a href="family-timeline.html" class="nav-menu-item">ğŸ“– Family Timeline</a>
    </nav>

    <div class="tree-container">
        <svg id="tree-canvas"></svg>
    </div>
    <script src="script.js?v=20260111b"></script>

    <!-- Navigation Menu Toggle Script -->
    <script>
        const navMenuToggle = document.getElementById('navMenuToggle');
        const navMenu = document.getElementById('navMenu');
        const navMenuOverlay = document.getElementById('navMenuOverlay');

        navMenuToggle.addEventListener('click', function() {
            navMenuToggle.classList.toggle('active');
            navMenu.classList.toggle('active');
            navMenuOverlay.classList.toggle('active');
        });

        navMenuOverlay.addEventListener('click', function() {
            navMenuToggle.classList.remove('active');
            navMenu.classList.remove('active');
            navMenuOverlay.classList.remove('active');
        });

        // Close nav menu on orientation change to prevent freezing
        window.addEventListener('orientationchange', function() {
            // Force close immediately - no transition delay
            navMenuToggle.classList.remove('active');
            navMenu.classList.remove('active');
            navMenuOverlay.classList.remove('active');

            // Force hide menu during rotation to prevent flickering
            navMenu.style.display = 'none';
            navMenuOverlay.style.display = 'none';

            // Re-enable display after a short delay (after orientation settles)
            setTimeout(function() {
                navMenu.style.display = '';
                navMenuOverlay.style.display = '';
            }, 500);
        });

        // Also close on resize (backup for devices that don't fire orientationchange)
        let resizeTimeout;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(function() {
                // Check if orientation actually changed (significant size swap)
                const currentWidth = window.innerWidth;
                const currentHeight = window.innerHeight;
                const isNowLandscape = currentWidth > currentHeight;

                // Close menu if orientation changed
                if (window.lastOrientation !== isNowLandscape) {
                    navMenuToggle.classList.remove('active');
                    navMenu.classList.remove('active');
                    navMenuOverlay.classList.remove('active');

                    // Force hide during transition
                    navMenu.style.display = 'none';
                    navMenuOverlay.style.display = 'none';

                    setTimeout(function() {
                        navMenu.style.display = '';
                        navMenuOverlay.style.display = '';
                    }, 300);

                    window.lastOrientation = isNowLandscape;
                }
            }, 100);
        });

        // Initialize orientation tracking
        window.lastOrientation = window.innerWidth > window.innerHeight;
    </script>

    <!-- Page Load Animation Script -->
    <script>
        // Trigger animations on page load
        window.addEventListener('load', function() {
            // Animate tree container
            const treeContainer = document.querySelector('.tree-container');
            if (treeContainer) treeContainer.classList.add('animate-in');

            // Animate images
            const matajiImage = document.getElementById('matajiImage');
            if (matajiImage) matajiImage.classList.add('animate-in');

            const ganeshImage = document.getElementById('ganeshImage');
            if (ganeshImage) ganeshImage.classList.add('animate-in');

            // Animate family equation
            const familyEquation = document.querySelector('body > .family-equation');
            if (familyEquation) familyEquation.classList.add('animate-in');

            // Animate zoom controls (wait a bit for them to be created by script.js)
            setTimeout(function() {
                const zoomControls = document.querySelector('.zoom-controls');
                if (zoomControls) zoomControls.classList.add('animate-in');

                const searchContainer = document.querySelector('.search-container');
                if (searchContainer) searchContainer.classList.add('animate-in');
            }, 100);
        });
    </script>
</body>
</html>
